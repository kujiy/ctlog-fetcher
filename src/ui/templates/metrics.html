{#{% extends "dashboard.html" %}#}
{% block content %}
<h2>Metrics</h2>

<div class="nav-links" style="margin-bottom: 2em;">
    <a href="/">🏠 Dashboard</a>
    <a href="https://chikkuchiku.notion.site/CT-Log-267a4415c73980a98600c5cd06498da7" target="_blank">📖 研究に参加できます！</a>
    <a href="/unique_certs">🔒 Sample Certificates</a>
</div>
{% if error_message %}
  <div style="color:red;">{{ error_message }}</div>
{% endif %}
{% if metrics %}
  <table border="1" cellpadding="5" cellspacing="0">
    <thead>
      <tr>
        <th>Method</th>
        <th>Path</th>
        <th>Count</th>
        <th>Sum (seconds)</th>
        <th>Average (seconds)</th>
      </tr>
    </thead>
    <tbody>
      {% for row in metrics %}
      <tr>
        <td>{{ row.method }}</td>
        <td>{{ row.path }}</td>
        <td>{{ row.count }}</td>
        <td>{{ "%.3f"|format(row.sum) }}</td>
        <td>
          {% if row.count > 0 %}
            {{ "%.6f"|format(row.sum / row.count) }}
          {% else %}
            N/A
          {% endif %}
        </td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
{% else %}
  <p>No metrics data available.</p>
{% endif %}
{% endblock %}
